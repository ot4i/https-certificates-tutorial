<!DOCTYPE html>
<html class="no-js" lang="en">
 
	
<!-- header::Start -->
	<head>
		<!-- Use Internet Explorer 9 Standards mode for Eclipse Browser Control - https://www.eclipse.org/swt/faq.php#browsernativeie and https://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx -->
  		<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
		
		<!-- Next 2 http=equiv headers required to disable caching the Eclipse Browser Widget -->
		<meta http-equiv="Pragma" content="no-cache">
  		<meta http-equiv="Expires" content="-1">

		<meta charset="UTF-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<meta name="copyright" content="Copyright IBM Corporation 2014" />
		<meta name="abstract" content="IBM App Connect Enterprise V11 Tutorial">
		<meta name="author" content="IBM">
		<meta name="description" content="IBM App Connect Enterprise V11 Tutorial">
		<meta name="keywords" content="keywords" > 
		<meta name="robots" content="index,follow">
		<meta name="source" content="IBM App Connect Enterprise V11 Tutorial" /> 
		
		<title>IBM App Connect Enterprise V11 Tutorial</title>

    	<link rel="stylesheet" href="https://ot4i.github.io/iib-tutorials/css/main.css" />
		<link rel="stylesheet" href="https://ot4i.github.io/iib-tutorials/css/app.css" />
    	
		<script src="https://ot4i.github.io/iib-tutorials/js/json2.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/js2java.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/js2java_steps.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/vendor/modernizr.js"></script>
	</head>
<!-- header::End -->
<!-- body::Start -->
		<body>
  	<!-- body content here -->
	<div class="row">
	  <div class="small-12 medium-12 large-12 columns">
	    <p> </p>
	  </div>
	</div>
	<div class="row">
	  <div class="small-9 medium-9 large-9 columns">
	    <h4 class="title">Using HTTPS and certificates with the HTTPInput, HTTPReply and HTTPRequest nodes <action><button class="small radius button" tabindex="0" id="stepsViewDetails" onclick="viewDetails()"> View Details</button> </action></h4>
	  </div>
	  <div class="small-3 medium-3 large-3 columns">
		<a href="javascript:;" onclick="openExternalBrowser('https://www.ibm.com/support/knowledgecenter/en/SSTTDS_11.0.0/com.ibm.ace.home.doc/help_home.htm')" class="small right helplink">IBM Knowledge Center</a> 
	  </div>
	</div> 
	<hr>
	<div class="row">
		<div class="small-10 medium-10 large-10 columns">
		<h5> Learn how to create a Public Key Infrastructure with ACEv11 using self-signed certificates in order to send data securely across HTTPS. </h5>
		</div>
		<div class="small-2 medium-2 large-2 columns">
			<button class="small radius button right" tabindex="0" id="backToGallery" onclick="backToGallery()"> Back To Gallery
			</button>
		</div>
	</div>
	<div class="row">          
		  <div class="small-12 medium-12 large-12 columns">
			<ul class="tabs vertical"> 
				<li class="tab-title tab-title-small active">
				  <a href="javascript:;" onclick="show('panel21')">Create</a> 
				</li>
				<li class="tab-title tab-title-small">
				  <a href="javascript:;" onclick="show('panel31')">Prepare</a> 
				</li>
				<li class="tab-title tab-title-small">
				  <a href="javascript:;" onclick="show('panel41')">Run</a> 
				</li>
			</ul>
			<!-- editing -->
			<div class="tabs-content panel-thin-blue vertical"> 
		    	<div class="content active" id="panel21">
		    		
		    		<div class="small-10 medium-10 large-10 columns divider">
					
				      	<div class="row content-details">
					      	<h4></h4>
					        
						    
								<p> <center><img src="http://ot4i.github.io/https-certificates-tutorial/v11/en/Overview.png" alt></center> </p>
								
							
								<p> When you click Import, two projects will be created in your workspace: An application named <span class="application">ExampleClient</span> and an application named <span class="application">ExampleServer</span>. </p>
								
							
								<p> <span class="application">ExampleClient</span> provides a message flow named <span class="resource">ExampleClient</span> which is driven by an HTTPInput node configured to receive any input message across HTTP. An HTTPRequest node makes an HTTPS mutual authentication connection to the ExampleServer flow. </p>
								
							
								<p> <span class="application">ExampleServer</span> provides a message flow named <span class="resource">ExampleServer</span> which receives HTTPS data from the first flow. </p>
								
							
								<p> Once imported using the link on the right, the provided applications are ready to be deployed and tested. Before doing this, the Prepare tab contains instructions for creating the self-signed certificates and keystores which are required to secure the HTTPS communications between the flows. </p>
								
							
						</div>
						
						<div class="row content-details">
							<h4>Find out more</h4>
							<ul>
							
								
								
								<li> <a href="javascript:;" onclick="openExternalBrowser('https://www.ibm.com/support/knowledgecenter/en/SSTTDS_11.0.0/com.ibm.etools.mft.doc/ap34020_.htm')" title="Knowledge Center link to  Setting up a Public Key Infrastructure">Setting up a Public Key Infrastructure</a> </li>
									
							
							</ul>
						</div>
						
					</div>
					
					<div class="small-2 medium-2 large-2 columns">
					
					
					<h4 class="tkaction"><a href="javascript:;" onclick="importArtifacts(); openResource('MainJava')"> Import <img class="icon-image" src="https://ot4i.github.io/iib-tutorials/images/icons/ibmdesign/back-right-previous_128-orange.png"></a></h4>
										
				    </div>
					
		    	</div>
		    	<div class="content" id="panel31">
					
					<div class="small-12 medium-12 large-12 columns">
					
						<div class="row content-details">
						  	<h4>Create the keystores, truststores and certificates followed by two stand alone integration servers.</h4>
						    
						    
								<p> The following instructions are written assuming a Windows environment. Applying equivalent instructions for other platforms is left to the reader - for assistance in this regard the additional links to the full Knowledge Center product documentation will be helpful. The instructions show how to use two different utilities for the creation of keystores. Keytool is provided in the Java Development Kit (provided as part of your ACE installation) and gsk8capicmd_64 is provided as part of IBM's Global Security Kit (located in your IBM MQ installation). </p>
								
								
									
									<ol>
									
									
										<li> Create myclient_keystore.jks to contain a self-signed certificate for myclient:<br><code>keytool -genkeypair -keystore myclient_keystore.jks -storepass p4ssword -storetype jks -alias myclientcert -dname "CN=myclient,O=IBM,OU=DEV,L=Hursley,C=GB"</code>
										
										</li>
									
										<li> Export a public key certificate for myclient:<br><code>keytool -exportcert -keystore myclient_keystore.jks -storepass p4ssword -storetype jks -alias myclientcert -file myclientcert.arm</code>
										
										</li>
									
										<li> Create myserver_truststore.jks to contain the public key certificate for myclient:<br><code>keytool -importcert -keystore myserver_truststore.jks -storepass passw0rd -storetype jks -alias myclientcert -file myclientcert.arm</code>
										
										</li>
									
										<li> Create myserver_keystore.p12:<br><code>gsk8capicmd_64 -keydb -create -db myserver_keystore.p12 -type p12 -pw passw0rd</code>
										
										</li>
									
										<li> Create a self-signed certificate for myserver:<br><code>gsk8capicmd_64 -cert -create -db myserver_keystore.p12 -dn "CN=myserver,O=IBM,OU=DEV,L=Hursley,C=GB" -pw passw0rd -label myservercert</code>
										
										</li>
									
										<li> Export a public key certificate for myserver:<br><code>gsk8capicmd_64 -cert -extract -db myserver_keystore.p12 -pw passw0rd -label myservercert -target myservercert.arm -format ascii</code>
										
										</li>
									
										<li> Create myclient_truststore.jks to contain the public key certificate for myserver:<br><code>keytool -importcert -keystore myclient_truststore.jks -storepass p4ssword -storetype jks -alias myservercert -file myservercert.arm</code>
										
										</li>
									
									
									</ol>
									
								
							
								<p> Create and configure the Integration Server which will play the role of client: </p>
								
								
									
									<ol>
									
									
										<li> Create the work directory:<br><code>mqsicreateworkdir C:\temp\workdirclient</code>
										
										</li>
									
										<li> Set the integration server's credentials for accessing its keystore and truststore:<br><code>mqsisetdbparms -w C:\temp\workdirclient -n client::keystorePass -u notused -p p4ssword</code>
										
										</li>
									
										<li> Configure the integration server. In the C:\temp\workdirclient\server.conf.yaml file, edit the ResourceManagers / JVM section:<br><code>    keystoreType: 'JKS'</code><br><code>    keystoreFile: 'C:\temp\myclient_keystore.jks'</code><br><code>    keystorePass: 'client::keystorePass'</code><br><code>    truststoreType: 'JKS'</code><br><code>    truststoreFile: 'C:\temp\myclient_truststore.jks'</code><br><code>    truststorePass: 'client::keystorePass'</code>
										
										</li>
									
										<li> Start the integration server:<br><code>IntegrationServer -w C:\temp\workdirclient --admin-rest-api 7600 --http-port-number 7900</code>
										
										</li>
									
									
									</ol>
									
								
							
								<p> Create and configure the Integration Server which will play the role of server: </p>
								
								
									
									<ol>
									
									
										<li> Create the work directory:<br><code>mqsicreateworkdir C:\temp\workdirserver</code>
										
										</li>
									
										<li> Set the integration server's credentials for accessing its keystore and truststore:<br><code>mqsisetdbparms -w C:\temp\workdirserver -n server::keystorePass -u notused -p passw0rd</code>
										
										</li>
									
										<li> Configure the integration server. In the C:\temp\workdirserver\server.conf.yaml file, edit the ResourceManagers / HTTPSConnector section:<br><code>    ListenerPort: 7843</code><br><code>    ReqClientAuth: true</code><br><code>    KeyAlias: 'server1cert'</code><br><code>    KeyPassword: 'server::keystorePass'</code><br><code>    KeystoreFile: 'C:\temp\myserver_keystore.p12'</code><br><code>    KeystorePassword: 'server::keystorePass'</code><br><code>    KeystoreType: 'p12'</code><br><code>    TruststoreFile: 'C:\temp\myserver_truststore.jks'</code><br><code>    TruststorePassword: 'server::keystorePass'</code><br><code>    TruststoreType: 'JKS'</code>
										
										</li>
									
										<li> Start the integration server:<br><code>IntegrationServer -w C:\temp\workdirserver --admin-rest-api 7601 --http-port-number 7901</code>
										
										</li>
									
									
									</ol>
									
								
							
						</div>
						
						<div class="row content-details">
							<h4></h4>
							<ul>
							
							</ul>
						</div>
							
					</div>
					
		    	</div>
		    	<div class="content" id="panel41">
		    		
					<div class="small-12 medium-12 large-12 columns">
					
				    	<div class="row content-details">
					      	<h4></h4>
					        
						    
								<p> <h4>Deploy the message flows and then use the Flow Exerciser to test the tutorial scenario </h4></p>
								
								
									
									<ol>
									
									
										<li> In following these instructions ensure you deploy the correct flow to the correct integration server, as instructed:
										
										
											
											<ul>
											
												
													<li> In the Toolkit, connect to the stand-alone integration server on administration port 7601 (which is based upon the work directory C:\temp\workdirserver) and drag and drop deploy the BAR file named <span class="application">Server.bar</span> which you will find inside the application <span class="resource">ExampleServer</span>.</li>
												
													<li> Open <span class="resource">ExampleClient.msgflow</span> and click the Flow Exerciser icon <img src="http://ot4i.github.io/ot4i.tutorials//dist/images/icons/iib/startFlowExerciser.png" alt> to start testing the flow, ensuring that you deploy this flow to the stand-alone integration server available on administration port 7600 (which is based upon the work directory C:\temp\workdirclient).</li>
												
													<li> Click the Send Message icon <img src="http://ot4i.github.io/ot4i.tutorials/dist/images/icons/iib/sendMessage.png" alt>.</li>
												
													<li> One saved input message named <span class="resource">InputMessage</span> is provided. Select it and click Send and your message is sent to the HTTPInput node.</li>
												
													<li> <span class="resource">InputMessage</span> contains this data:<br><span class="resource">This can be anything</span></li>
												
													<li> This message flow invokes <span class="resource">ExampleServer.msgflow</span> across HTTPS and then when the reply message is returned back to the test client you will see that it contains this data:<br><span class="resource">{"Message":"If you see this response your test succeeded!"}</span></li>
												
													<li> After you close the dialog, the path taken through the message flow is highlighted.</li>
												
											
											</ul>
											
										
										</li>
									
									
									</ol>
									
								
							
								<p> This tutorial has shown how to create a Public Key Infrastructure with ACEv11 using self-signed certificates in order to send data securely across HTTPS. </p>
								
							
						</div>
						
						<div class="row content-details"> 	
							<h4>Find out more</h4>
							<ul>
							
								
								
								<li> <a href="javascript:;" onclick="openExternalBrowser('https://www.ibm.com/support/knowledgecenter/en/SSTTDS_11.0.0/com.ibm.etools.mft.doc/ap34020_.htm')" title="Knowledge Center link to  Setting up a Public Key Infrastructure">Setting up a Public Key Infrastructure</a> </li>
									
							
							</ul>
						</div>
							
					</div>
					
				</div>	
			</div> <!-- tab-content -->
		</div> <!-- columns -->
	  </div> <!-- row --></body>
		<script src="https://ot4i.github.io/iib-tutorials/js/vendor/jquery.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/vendor/foundation.min.js"></script>
		<script src="https://ot4i.github.io/iib-tutorials/js/main.js"></script>
	</body>
<!-- body::End -->

</html>